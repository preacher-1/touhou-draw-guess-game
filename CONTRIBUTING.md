# 团队 Git 协作开发指南 (v1.0)

欢迎加入项目！为了让大家（特别是 Git 新手）能够顺畅地协作，我们采用一种非常简单且主流的 Git 工作流程。请大家在开发时遵循以下步骤。

## 核心原则

- **`main` 分支是受保护的**：任何人都不允许直接向 `main` 分支提交代码。所有代码都必须通过“合并请求”（Pull Request）合入。
- **在自己的分支上工作**：每当你开始一个新任务，都应该创建一个属于你自己的分支。这可以确保你的开发工作不会影响到其他人。
- **频繁、小步提交**：不要等到所有工作都完成了才提交。每完成一个小功能点，就进行一次提交，这样更容易追踪和回滚。

---

## 一、开始一个新任务（例如：开发画布页面）

假设你要开始开发 `TODO.md` 中的任务 **F1.1: 画布基础布局**。

### 1. **第一步：确保你的 `main` 分支是最新版**

在开始任何新工作前，务必先从远程仓库拉取最新的代码，确保你的本地 `main` 分支和服务器上的是同步的。

```bash
# 1. 切换到 main 分支
git checkout main

# 2. 从远程仓库拉取最新更新
git pull origin main
```

### 2. **第二步：为你的任务创建一个新分支**

从最新的 `main` 分支上创建一个新的分支。分支命名规则建议为：`feature/你的任务` 或 `fix/问题描述`。

```bash
# 为“画布页面”这个特性创建一个名为 feature/canvas-page 的分支
git checkout -b feature/canvas-page
```

现在，你已经切换到了一个全新的、独立的分支。在这里的任何修改都只属于你自己，可以放心大胆地编码了！

---

## 二、在开发过程中保存你的进度

在你的分支上，每当你完成了一个小功能（比如完成了 HTML 布局），就应该进行一次“提交”（Commit）。

### 1. **第一步：将你的修改添加到暂存区**

告诉 Git 你希望将哪些文件的改动包含在下一次提交中。

```bash
# 添加单个文件
git add frontend/canvas.html

# 或者，添加所有你修改过的文件（常用）
git add .
```

### 2. **第二步：提交你的改动**

为你的这次提交附上一段清晰的说明信息。一个好的提交信息能让其他人快速了解你做了什么。

**提交信息格式建议**：`类型: 简短描述`

- **类型**: `feat` (新功能), `fix` (修复 Bug), `docs` (文档修改), `style` (代码格式), `refactor` (重构)

```bash
# 示例：一个描述清晰的提交
git commit -m "feat: 完成画布页面的基础 HTML 布局"
```

### 3. **第三步：将你的分支推送到远程仓库**

为了备份你的代码，也为了之后能发起合并请求，你需要将你的本地分支推送到远程服务器。

```bash
# 第一次推送新分支时，需要设置上游 (upstream)
git push --set-upstream origin feature/canvas-page

# 之后再推送这个分支时，只需简单地：
git push
```

---

## 三、完成任务并发起合并请求 (Pull Request)

当你完成了 `TODO.md` 中分配给你的所有相关任务（例如，从 F1.1 到 F1.6 都做完了），并且在本地测试通过后，就可以准备将你的代码合并到 `main` 分支了。

### 1. **第一步：确保你的分支包含了 `main` 的最新改动**

在你的开发期间，`main` 分支可能已经有了其他成员提交的新代码。你需要先将这些新代码同步到你自己的分支，解决可能出现的冲突。

```bash
# 1. 切换到 main 分支并拉取最新代码
git checkout main
git pull origin main

# 2. 切换回你自己的分支
git checkout feature/canvas-page

# 3. 将 main 分支的最新改动合并到你的分支
git merge main
```
> 如果出现“冲突”（Conflict），Git 会在文件中标记出来。这是正常现象，你需要手动编辑这些文件，解决冲突后，再执行 `git add .` 和 `git commit`。如果不懂如何解决，请大胆求助！

### 2. **第二步：在 GitHub/Gitee 页面上创建合并请求**

将你的分支推送到远程后，打开项目的 GitHub 或 Gitee 页面。通常系统会自动提示你“`feature/canvas-page` 分支有新的提交”，并显示一个【Create Pull Request】按钮。

点击它，填写标题和描述（说明你完成了什么功能），然后提交。

### 3. **第三步：代码审查与合并**

创建 Pull Request 后，项目负责人或其他成员会审查你的代码。他们可能会提出一些修改建议。

- 如果有建议，你只需在你的本地分支上继续修改、提交并推送到远程，Pull Request 会自动更新。
- 当所有人都同意你的代码没有问题后，负责人会在网页上点击【Merge Pull Request】按钮，将你的代码正式合入 `main` 分支。

**至此，你的一个开发任务就圆满完成了！** 接着，你可以回到第一步，开始你的下一个任务。
