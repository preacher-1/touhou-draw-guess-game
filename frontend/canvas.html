<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>画布 - Touhou Draw & Guess</title>
		<link rel="stylesheet" href="/static/css/canvas.css" />
		<!-- fabric.js from CDN -->
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"
			integrity=""
			crossorigin="anonymous"
		></script>
	</head>
	<body>
		<div class="header">画布页面（Canvas）</div>
		<div class="container">
			<div class="toolbar">
				<div class="group" id="game-info-container">
					<div id="game-info-display">
						<div class="info-line" id="game-info-round">
							状态: 游戏未开始
						</div>
						<div class="info-line" id="game-info-target">
							目标: ---
						</div>
					</div>
					<div class="timer" id="timer-display-container">
						<div id="timer-display">等待计时器...</div>
					</div>
				</div>

				<div class="group">
					<label>笔刷大小</label>
					<div class="brush-size-container">
						<input
							id="brush-size"
							type="range"
							min="1"
							max="60"
							value="6"
						/>
						<div class="brush-preview" id="brush-preview">
							<div class="brush-dot" id="brush-preview-dot"></div>
						</div>
					</div>
				</div>

				<div class="group">
					<label>颜色</label>
					<div class="color-picker">
						<!-- 预设常用颜色 -->
						<div
							class="color-swatch"
							data-color="#000000"
							style="background-color: #000000"
						></div>
						<div
							class="color-swatch"
							data-color="#FFFFFF"
							style="background-color: #ffffff"
						></div>
						<div
							class="color-swatch"
							data-color="#C5C5C5"
							style="background-color: #c5c5c5"
						></div>
						<div
							class="color-swatch"
							data-color="#fb4447"
							style="background-color: #fb4447"
						></div>
						<div
							class="color-swatch"
							data-color="#ee5f00"
							style="background-color: #ee5f00"
						></div>
						<div
							class="color-swatch"
							data-color="#EEEE00"
							style="background-color: #eeee00"
						></div>
						<div
							class="color-swatch"
							data-color="#00EE00"
							style="background-color: #00ee00"
						></div>
						<div
							class="color-swatch"
							data-color="#00BFFF"
							style="background-color: #00bfff"
						></div>
						<div
							class="color-swatch"
							data-color="#006eff"
							style="background-color: #006eff"
						></div>
						<div
							class="color-swatch"
							data-color="#F5AF98"
							style="background-color: #f5af98"
						></div>
						<div
							class="color-swatch"
							data-color="#A020F0"
							style="background-color: #a020f0"
						></div>
					</div>
					<div class="custom-color-container">
						<input id="brush-color" type="color" value="#000000" />
						<label for="brush-color">自定义</label>
					</div>
				</div>

				<div class="group">
					<button class="button" id="undo-btn">⬅️ 撤销</button>
					<button class="button" id="redo-btn">➡️ 重做</button>
					<button class="button secondary" id="reset-btn">
						🗑️ 重置
					</button>
				</div>

				<div class="group">
					<button class="button" id="eraser-btn">🧼 橡皮</button>
					<button class="button" id="fill-btn">🩸 油漆桶</button>
					<!-- <button class="button" id="download-btn">💾 保存</button> -->
				</div>

				<div class="history-panel">
					<h3>历史记录</h3>
					<div class="history-list" id="history-list">
						<!-- 历史记录项会动态添加到这里 -->
					</div>
				</div>
			</div>

			<div class="canvas-area">
				<button class="button" id="download-btn">💾 保存</button>
				<canvas id="main-canvas" width="800" height="600"></canvas>
			</div>
		</div>

		<script src="/static/js/passwordPrompt.js"></script>
		<script src="/static/js/canvas.app.js"></script>

		<script src="/static/js/canvas.config.js"></script>
		<script src="/static/js/canvas.utils.js"></script>

		<script src="/static/js/canvas.websocket.js"></script>
		<script src="/static/js/canvas.ui.js"></script>
		<script src="/static/js/canvas.upload.js"></script>
		<script src="/static/js/canvas.history.js"></script>

		<script src="/static/js/canvas.fabric.js"></script>

		<script>
			window.canvasModuleInit && window.canvasModuleInit();
		</script>
	</body>
</html>
